(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(941)}])},941:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return a}});var s=t(5893);function i(e){let{label:l,onClick:t}=e;return(0,s.jsx)("button",{onClick:t,className:"m-2 rounded-md border-white border-4 border-solid p-2",children:l})}var n=t(3299),r=t(7294);function a(){let[e,l]=(0,r.useState)(!1),[t,a]=(0,r.useState)([]),{data:d,status:u}=(0,n.useSession)(),h=(0,r.useRef)(null),f=async()=>{try{let e=await fetch("./api/auth/getDrive/getFilesList"),l=await e.json();a(l.files)}catch(e){console.log(e,"ERROR")}};return((0,r.useEffect)(()=>{"authenticated"==u&&f()},[d]),"loading"===u)?(0,s.jsx)("h1",{children:" loading... please wait"}):"authenticated"===u?d.user?(0,s.jsxs)("div",{className:"text-lg font-serif flex h-full justify-center items-center flex-row gap-10",children:[e&&(0,s.jsx)(o,{toggleModal:()=>l(!e)}),(0,s.jsxs)("div",{className:"h-1/2 flex flex-col justify-center items-center p-5 border-white border-solid border-2",children:["Files",(0,s.jsx)("ul",{className:"overflow-scroll",children:t.length&&t.map(e=>(0,s.jsx)("li",{className:"cursor-pointer",onClick:()=>fetch("./api/auth/getDrive/downloadFile",{method:"POST",body:JSON.stringify({fileId:e.id,mimeType:e.mimeType})}),children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center p-5 border-white border-solid border-2",children:[(0,s.jsxs)("h1",{children:[" Hello, ",d.user.name]}),(0,s.jsx)("img",{className:"object-contain h-[100px] w-[100px]",src:d.user.image||"",alt:d.user.name+" photo"}),(0,s.jsx)("input",{ref:h,onChange:e=>{let{currentTarget:l}=e;return l.files&&c(l.files)},className:"hidden",type:"file",id:"uploadFile"}),(0,s.jsx)(i,{onClick:()=>{var e;null===(e=h.current)||void 0===e||e.click()},label:"Upload File"}),(0,s.jsx)(i,{onClick:()=>{l(!e)},label:"Search File"}),(0,s.jsx)(i,{onClick:()=>(0,n.signOut)(),label:"Sign Out"})]})]}):(0,s.jsx)("div",{}):(0,s.jsx)("div",{className:"flex justify-center h-[100%] items-center flex-col text-lg font-serif",children:(0,s.jsxs)("div",{className:"bg-white flex flex-col p-5 border-white border-solid border-2",children:[(0,s.jsx)("span",{className:"text-black",children:"Hello, Welcome"}),(0,s.jsx)("button",{className:"m-2 bg-black rounded-md p-4",onClick:()=>(0,n.signIn)("google"),children:"Sign In With Google"})]})})}let c=e=>{let l=e[0];fetch("./api/auth/getDrive/uploadFile",{method:"POST",body:l.stream()})},o=e=>{let{toggleModal:l}=e;return(0,s.jsxs)("div",{className:"bg-white justify-center items-center flex flex-col text-black h-1/4 w-1/2 absolute p-5",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[(0,s.jsx)("span",{children:"Search"}),(0,s.jsx)("button",{onClick:l,className:"text-black border-black border-solid border-2 px-1",children:"X"})]}),(0,s.jsx)("input",{type:"text",className:"my-2 bg-gray-100 p-3 w-full",placeholder:"Enter File Name"}),(0,s.jsx)("button",{className:"m-2 px-10 text-white w-min bg-black rounded-md p-4",onClick:l,children:"Submit"})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);